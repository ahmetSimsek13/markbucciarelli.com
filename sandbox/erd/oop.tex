%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% entity-relationship.tex
% An example demonstrating the use of the tikz-er2 package for drawing
% entity-relationship diagrams
% https://github.com/mhyee/latex-examples/
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% LaTeX Preamble
% Load packages and set options as needed
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Set the document class to "article"
% Pass it "letterpaper" option
\documentclass[letterpaper]{article}

% We don't need the special font encodings, but still
% good practice to include these. See:
%
% http://tex.stackexchange.com/questions/664/why-should-i-use-usepackaget1fontenc
% http://dsanta.users.ch/resources/type1.html
\usepackage[T1]{fontenc}
\usepackage{ae,aecompl}
% http://tex.stackexchange.com/a/44699
% http://tex.stackexchange.com/a/44701
\usepackage[utf8]{inputenc}

% Use Latin Modern, an improved version of the Computer Modern font
\usepackage{lmodern}

% Entity-relationsip package
\usepackage{tikz-er2}
% Include tikz library for more control over positioning
\usetikzlibrary{positioning}
% Styling for entities, attributes, and relationships
\tikzstyle{every entity} = [draw=blue!50!black!100, fill=blue!20]
\tikzstyle{every attribute} = [draw=yellow!50!black!100, fill=yellow!20]
\tikzstyle{every relationship} = [draw=green!50!black!100, fill=green!20]

% Don't indent paragraphs
\usepackage{parskip}

% Disable page numbering
\pagestyle{empty}

% Begin the actual typesetting, by starting the "document" environment
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\begin{center}
\begin{tikzpicture}[node distance=6em, every edge/.style={link}]

  \node[entity] (task) {Task};
    \node[attribute] (e_name) [left=2em of task] {\key{Name}} edge (task);
    \node[attribute] (e_canc) [right=2em of task] {Canceled?} edge (task);

  \node[relationship] (works) [below of=task, node distance=12em] {WorksOn} edge (task);
    \node[attribute] (w_est1) [above left=2em of works] {First Estimate} edge (works);
    \node[attribute] (w_est2) [left=2em of works] {Second Estimate} edge (works);
    \node[attribute] (w_est3) [below left=2em of works] {Third Estimate} edge (works);
    \node[attribute] (w_act)  [right=2em of works] {Actual} edge (works);
    \node[attribute] (w_inter) [below right=2em of works] {Interuptions} edge (works);
    \node[attribute] (w_plan) [above right=2em and -0.2em of works] {Planned?} edge (works);
    \node[attribute] (w_comp) [above right=1em and 6.5em of works] {Completed?} edge (works);

  \node[entity] (day) [below of=works, node distance=12em] {WorkDay} edge (works);
    \node[attribute] (d_date) [left=2em of day] {\key{Date}} edge (day);

\end{tikzpicture}
\end{center}

\end{document}
